Review##

# Implementing a Custom Confirmation Modal

You are currently using the browser's native `confirm()` function. To upgrade this to a nice looking custom modal, follow these steps.

## 1. Add the Modal HTML

Add this code at the bottom of your HTML file, just before the `<script>` tags (similar to your existing `addModal` and `editModal`).

<pre><div node="[object Object]" class="relative whitespace-pre-wrap word-break-all p-3 my-2 rounded-sm bg-list-hover-subtle"><div class="w-full h-full text-xs cursor-text"><div class="code-block"><div class="code-line" data-line-number="1" data-line-start="1" data-line-end="1"><div class="line-content"><span class="mtk5"><!-- Approve Confirmation Modal --></span></div></div><div class="code-line" data-line-number="2" data-line-start="2" data-line-end="2"><div class="line-content"><span class="mtk14"><</span><span class="mtk6">div</span><span class="mtk1"></span><span class="mtk10">id</span><span class="mtk1">=</span><span class="mtk12">"approveModal"</span><span class="mtk1"></span><span class="mtk10">class</span><span class="mtk1">=</span><span class="mtk12">"hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="3" data-line-start="3" data-line-end="3"><div class="line-content"><span class="mtk1"></span><span class="mtk14"><</span><span class="mtk6">div</span><span class="mtk1"></span><span class="mtk10">class</span><span class="mtk1">=</span><span class="mtk12">"bg-white rounded-lg shadow-xl max-w-md w-full"</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="4" data-line-start="4" data-line-end="4"><div class="line-content"><span class="mtk1"></span><span class="mtk5"><!-- Modal Header --></span></div></div><div class="code-line" data-line-number="5" data-line-start="5" data-line-end="5"><div class="line-content"><span class="mtk1"></span><span class="mtk14"><</span><span class="mtk6">div</span><span class="mtk1"></span><span class="mtk10">class</span><span class="mtk1">=</span><span class="mtk12">"p-6 border-b flex items-center gap-3"</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="6" data-line-start="6" data-line-end="6"><div class="line-content"><span class="mtk1"></span><span class="mtk14"><</span><span class="mtk6">div</span><span class="mtk1"></span><span class="mtk10">class</span><span class="mtk1">=</span><span class="mtk12">"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center"</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="7" data-line-start="7" data-line-end="7"><div class="line-content"><span class="mtk1"></span><span class="mtk14"><</span><span class="mtk6">i</span><span class="mtk1"></span><span class="mtk10">class</span><span class="mtk1">=</span><span class="mtk12">"fas fa-check text-green-600 text-xl"</span><span class="mtk14">></</span><span class="mtk6">i</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="8" data-line-start="8" data-line-end="8"><div class="line-content"><span class="mtk1"></span><span class="mtk14"></</span><span class="mtk6">div</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="9" data-line-start="9" data-line-end="9"><div class="line-content"><span class="mtk1"></span><span class="mtk14"><</span><span class="mtk6">h3</span><span class="mtk1"></span><span class="mtk10">class</span><span class="mtk1">=</span><span class="mtk12">"text-xl font-bold text-gray-900"</span><span class="mtk14">></span><span class="mtk1">Approve Property?</span><span class="mtk14"></</span><span class="mtk6">h3</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="10" data-line-start="10" data-line-end="10"><div class="line-content"><span class="mtk1"></span><span class="mtk14"></</span><span class="mtk6">div</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="11" data-line-start="11" data-line-end="11"><div class="line-content"><span class="mtk1"></span></div></div><div class="code-line" data-line-number="12" data-line-start="12" data-line-end="12"><div class="line-content"><span class="mtk1"></span><span class="mtk5"><!-- Modal Body --></span></div></div><div class="code-line" data-line-number="13" data-line-start="13" data-line-end="13"><div class="line-content"><span class="mtk1"></span><span class="mtk14"><</span><span class="mtk6">div</span><span class="mtk1"></span><span class="mtk10">class</span><span class="mtk1">=</span><span class="mtk12">"p-6"</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="14" data-line-start="14" data-line-end="14"><div class="line-content"><span class="mtk1"></span><span class="mtk14"><</span><span class="mtk6">p</span><span class="mtk1"></span><span class="mtk10">class</span><span class="mtk1">=</span><span class="mtk12">"text-gray-600"</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="15" data-line-start="15" data-line-end="15"><div class="line-content"><span class="mtk1">        Are you sure you want to approve this property? It will become visible on the public site immediately.</span></div></div><div class="code-line" data-line-number="16" data-line-start="16" data-line-end="16"><div class="line-content"><span class="mtk1"></span><span class="mtk14"></</span><span class="mtk6">p</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="17" data-line-start="17" data-line-end="17"><div class="line-content"><span class="mtk1"></span><span class="mtk14"></</span><span class="mtk6">div</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="18" data-line-start="18" data-line-end="18"><div class="line-content"><span class="mtk1"></span></div></div><div class="code-line" data-line-number="19" data-line-start="19" data-line-end="19"><div class="line-content"><span class="mtk1"></span><span class="mtk5"><!-- Modal Footer --></span></div></div><div class="code-line" data-line-number="20" data-line-start="20" data-line-end="20"><div class="line-content"><span class="mtk1"></span><span class="mtk14"><</span><span class="mtk6">div</span><span class="mtk1"></span><span class="mtk10">class</span><span class="mtk1">=</span><span class="mtk12">"p-4 bg-gray-50 rounded-b-lg flex justify-end gap-3"</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="21" data-line-start="21" data-line-end="21"><div class="line-content"><span class="mtk1"></span><span class="mtk14"><</span><span class="mtk6">button</span><span class="mtk1"></span><span class="mtk10">onclick</span><span class="mtk1">=</span><span class="mtk12">"</span><span class="mtk16">closeApproveModal</span><span class="mtk12">()"</span><span class="mtk1"></span></div></div><div class="code-line" data-line-number="22" data-line-start="22" data-line-end="22"><div class="line-content"><span class="mtk1"></span><span class="mtk10">class</span><span class="mtk1">=</span><span class="mtk12">"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 font-medium"</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="23" data-line-start="23" data-line-end="23"><div class="line-content"><span class="mtk1">        Cancel</span></div></div><div class="code-line" data-line-number="24" data-line-start="24" data-line-end="24"><div class="line-content"><span class="mtk1"></span><span class="mtk14"></</span><span class="mtk6">button</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="25" data-line-start="25" data-line-end="25"><div class="line-content"><span class="mtk1"></span><span class="mtk14"><</span><span class="mtk6">button</span><span class="mtk1"></span><span class="mtk10">onclick</span><span class="mtk1">=</span><span class="mtk12">"</span><span class="mtk16">confirmApprove</span><span class="mtk12">()"</span><span class="mtk1"></span></div></div><div class="code-line" data-line-number="26" data-line-start="26" data-line-end="26"><div class="line-content"><span class="mtk1"></span><span class="mtk10">class</span><span class="mtk1">=</span><span class="mtk12">"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold shadow-sm"</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="27" data-line-start="27" data-line-end="27"><div class="line-content"><span class="mtk1">        Yes, Approve It</span></div></div><div class="code-line" data-line-number="28" data-line-start="28" data-line-end="28"><div class="line-content"><span class="mtk1"></span><span class="mtk14"></</span><span class="mtk6">button</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="29" data-line-start="29" data-line-end="29"><div class="line-content"><span class="mtk1"></span><span class="mtk14"></</span><span class="mtk6">div</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="30" data-line-start="30" data-line-end="30"><div class="line-content"><span class="mtk1"></span><span class="mtk14"></</span><span class="mtk6">div</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="31" data-line-start="31" data-line-end="31"><div class="line-content"><span class="mtk14"></</span><span class="mtk6">div</span><span class="mtk14">></span></div></div></div></div></div></pre>

## 2. Update Your JavaScript

You need to split your logic into:

1. Opening the modal (and saving the ID).
2. Actually performing the action when "Yes" is clicked.

Replace your existing

approveProperty function with this:

<pre><div node="[object Object]" class="relative whitespace-pre-wrap word-break-all p-3 my-2 rounded-sm bg-list-hover-subtle"><div class="w-full h-full text-xs cursor-text"><div class="code-block"><div class="code-line" data-line-number="1" data-line-start="1" data-line-end="1"><div class="line-content"><span class="mtk6">let</span><span class="mtk1"></span><span class="mtk10">propertyIdToApprove</span><span class="mtk1"></span><span class="mtk3">=</span><span class="mtk1"></span><span class="mtk6">null</span><span class="mtk1">; </span><span class="mtk5">// Variable to store the ID temporarily</span></div></div><div class="code-line" data-line-number="2" data-line-start="2" data-line-end="2"><div class="line-content"><span class="mtk1"></span></div></div><div class="code-line" data-line-number="3" data-line-start="3" data-line-end="3"><div class="line-content"><span class="mtk1"></span><span class="mtk5">// 1. Triggered by the button in the table</span></div></div><div class="code-line" data-line-number="4" data-line-start="4" data-line-end="4"><div class="line-content"><span class="mtk1"></span><span class="mtk6">function</span><span class="mtk1"></span><span class="mtk16">openApproveModal</span><span class="mtk1">(</span><span class="mtk10">id</span><span class="mtk1">) {</span></div></div><div class="code-line" data-line-number="5" data-line-start="5" data-line-end="5"><div class="line-content"><span class="mtk1"></span><span class="mtk10">propertyIdToApprove</span><span class="mtk1"></span><span class="mtk3">=</span><span class="mtk1"></span><span class="mtk10">id</span><span class="mtk1">; </span><span class="mtk5">// Save the ID</span></div></div><div class="code-line" data-line-number="6" data-line-start="6" data-line-end="6"><div class="line-content"><span class="mtk1"></span><span class="mtk10">document</span><span class="mtk1">.</span><span class="mtk16">getElementById</span><span class="mtk1">(</span><span class="mtk12">'approveModal'</span><span class="mtk1">).</span><span class="mtk10">classList</span><span class="mtk1">.</span><span class="mtk16">remove</span><span class="mtk1">(</span><span class="mtk12">'hidden'</span><span class="mtk1">); </span><span class="mtk5">// Show modal</span></div></div><div class="code-line" data-line-number="7" data-line-start="7" data-line-end="7"><div class="line-content"><span class="mtk1">  }</span></div></div><div class="code-line" data-line-number="8" data-line-start="8" data-line-end="8"><div class="line-content"><span class="mtk1"></span></div></div><div class="code-line" data-line-number="9" data-line-start="9" data-line-end="9"><div class="line-content"><span class="mtk1"></span><span class="mtk5">// 2. Triggered by "Cancel"</span></div></div><div class="code-line" data-line-number="10" data-line-start="10" data-line-end="10"><div class="line-content"><span class="mtk1"></span><span class="mtk6">function</span><span class="mtk1"></span><span class="mtk16">closeApproveModal</span><span class="mtk1">() {</span></div></div><div class="code-line" data-line-number="11" data-line-start="11" data-line-end="11"><div class="line-content"><span class="mtk1"></span><span class="mtk10">propertyIdToApprove</span><span class="mtk1"></span><span class="mtk3">=</span><span class="mtk1"></span><span class="mtk6">null</span><span class="mtk1">; </span><span class="mtk5">// Clear ID</span></div></div><div class="code-line" data-line-number="12" data-line-start="12" data-line-end="12"><div class="line-content"><span class="mtk1"></span><span class="mtk10">document</span><span class="mtk1">.</span><span class="mtk16">getElementById</span><span class="mtk1">(</span><span class="mtk12">'approveModal'</span><span class="mtk1">).</span><span class="mtk10">classList</span><span class="mtk1">.</span><span class="mtk16">add</span><span class="mtk1">(</span><span class="mtk12">'hidden'</span><span class="mtk1">); </span><span class="mtk5">// Hide modal</span></div></div><div class="code-line" data-line-number="13" data-line-start="13" data-line-end="13"><div class="line-content"><span class="mtk1">  }</span></div></div><div class="code-line" data-line-number="14" data-line-start="14" data-line-end="14"><div class="line-content"><span class="mtk1"></span></div></div><div class="code-line" data-line-number="15" data-line-start="15" data-line-end="15"><div class="line-content"><span class="mtk1"></span><span class="mtk5">// 3. Triggered by "Yes, Approve It" inside the modal</span></div></div><div class="code-line" data-line-number="16" data-line-start="16" data-line-end="16"><div class="line-content"><span class="mtk1"></span><span class="mtk6">function</span><span class="mtk1"></span><span class="mtk16">confirmApprove</span><span class="mtk1">() {</span></div></div><div class="code-line" data-line-number="17" data-line-start="17" data-line-end="17"><div class="line-content"><span class="mtk1"></span><span class="mtk18">if</span><span class="mtk1"> (</span><span class="mtk3">!</span><span class="mtk10">propertyIdToApprove</span><span class="mtk1">) </span><span class="mtk18">return</span><span class="mtk1">;</span></div></div><div class="code-line" data-line-number="18" data-line-start="18" data-line-end="18"><div class="line-content"><span class="mtk1"></span></div></div><div class="code-line" data-line-number="19" data-line-start="19" data-line-end="19"><div class="line-content"><span class="mtk1"></span><span class="mtk5">// Use the stored ID for the API call</span></div></div><div class="code-line" data-line-number="20" data-line-start="20" data-line-end="20"><div class="line-content"><span class="mtk1"></span><span class="mtk16">fetch</span><span class="mtk1">(</span><span class="mtk12">`/api/approve_property/</span><span class="mtk6">${</span><span class="mtk10">propertyIdToApprove</span><span class="mtk6">}</span><span class="mtk12">`</span><span class="mtk1">, {</span></div></div><div class="code-line" data-line-number="21" data-line-start="21" data-line-end="21"><div class="line-content"><span class="mtk1"></span><span class="mtk10">method:</span><span class="mtk1"></span><span class="mtk12">'POST'</span><span class="mtk1">,</span></div></div><div class="code-line" data-line-number="22" data-line-start="22" data-line-end="22"><div class="line-content"><span class="mtk1"></span><span class="mtk10">headers:</span><span class="mtk1"> {</span></div></div><div class="code-line" data-line-number="23" data-line-start="23" data-line-end="23"><div class="line-content"><span class="mtk1"></span><span class="mtk12">'X-CSRFToken'</span><span class="mtk10">:</span><span class="mtk1"></span><span class="mtk12">'{{ csrf_token }}'</span></div></div><div class="code-line" data-line-number="24" data-line-start="24" data-line-end="24"><div class="line-content"><span class="mtk1">      },</span></div></div><div class="code-line" data-line-number="25" data-line-start="25" data-line-end="25"><div class="line-content"><span class="mtk1">    })</span></div></div><div class="code-line" data-line-number="26" data-line-start="26" data-line-end="26"><div class="line-content"><span class="mtk1">    .</span><span class="mtk16">then</span><span class="mtk1">(</span><span class="mtk10">response</span><span class="mtk1"></span><span class="mtk6">=></span><span class="mtk1"> {</span></div></div><div class="code-line" data-line-number="27" data-line-start="27" data-line-end="27"><div class="line-content"><span class="mtk1"></span><span class="mtk18">if</span><span class="mtk1"> (</span><span class="mtk10">response</span><span class="mtk1">.</span><span class="mtk10">ok</span><span class="mtk1">) {</span></div></div><div class="code-line" data-line-number="28" data-line-start="28" data-line-end="28"><div class="line-content"><span class="mtk1"></span><span class="mtk5">// Optional: Show a success message or toast here</span></div></div><div class="code-line" data-line-number="29" data-line-start="29" data-line-end="29"><div class="line-content"><span class="mtk1"></span><span class="mtk10">location</span><span class="mtk1">.</span><span class="mtk16">reload</span><span class="mtk1">(); </span></div></div><div class="code-line" data-line-number="30" data-line-start="30" data-line-end="30"><div class="line-content"><span class="mtk1">      } </span><span class="mtk18">else</span><span class="mtk1"> {</span></div></div><div class="code-line" data-line-number="31" data-line-start="31" data-line-end="31"><div class="line-content"><span class="mtk1"></span><span class="mtk16">alert</span><span class="mtk1">(</span><span class="mtk12">'Failed to approve property'</span><span class="mtk1">);</span></div></div><div class="code-line" data-line-number="32" data-line-start="32" data-line-end="32"><div class="line-content"><span class="mtk1">      }</span></div></div><div class="code-line" data-line-number="33" data-line-start="33" data-line-end="33"><div class="line-content"><span class="mtk1">    })</span></div></div><div class="code-line" data-line-number="34" data-line-start="34" data-line-end="34"><div class="line-content"><span class="mtk1">    .</span><span class="mtk16">catch</span><span class="mtk1">(</span><span class="mtk10">error</span><span class="mtk1"></span><span class="mtk6">=></span><span class="mtk1"> {</span></div></div><div class="code-line" data-line-number="35" data-line-start="35" data-line-end="35"><div class="line-content"><span class="mtk1"></span><span class="mtk10">console</span><span class="mtk1">.</span><span class="mtk16">error</span><span class="mtk1">(</span><span class="mtk12">'Error:'</span><span class="mtk1">, </span><span class="mtk10">error</span><span class="mtk1">);</span></div></div><div class="code-line" data-line-number="36" data-line-start="36" data-line-end="36"><div class="line-content"><span class="mtk1"></span><span class="mtk16">alert</span><span class="mtk1">(</span><span class="mtk12">'An error occurred while approving property'</span><span class="mtk1">);</span></div></div><div class="code-line" data-line-number="37" data-line-start="37" data-line-end="37"><div class="line-content"><span class="mtk1">    })</span></div></div><div class="code-line" data-line-number="38" data-line-start="38" data-line-end="38"><div class="line-content"><span class="mtk1">    .</span><span class="mtk16">finally</span><span class="mtk1">(() </span><span class="mtk6">=></span><span class="mtk1"> {</span></div></div><div class="code-line" data-line-number="39" data-line-start="39" data-line-end="39"><div class="line-content"><span class="mtk1"></span><span class="mtk16">closeApproveModal</span><span class="mtk1">(); </span><span class="mtk5">// Cleanup</span></div></div><div class="code-line" data-line-number="40" data-line-start="40" data-line-end="40"><div class="line-content"><span class="mtk1">    });</span></div></div><div class="code-line" data-line-number="41" data-line-start="41" data-line-end="41"><div class="line-content"><span class="mtk1">  }</span></div></div></div></div></div></pre>

## 3. Update the Button in the Table

Finally, update the button in your table loop to call `openApproveModal` instead of

approveProperty.

<pre><div node="[object Object]" class="relative whitespace-pre-wrap word-break-all p-3 my-2 rounded-sm bg-list-hover-subtle"><div class="w-full h-full text-xs cursor-text"><div class="code-block"><div class="code-line" data-line-number="1" data-line-start="1" data-line-end="1"><div class="line-content"><span class="mtk5"><!-- Old --></span></div></div><div class="code-line" data-line-number="2" data-line-start="2" data-line-end="2"><div class="line-content"><span class="mtk5"><!-- <button onclick="approveProperty({{property.id}})" ... > --></span></div></div><div class="code-line" data-line-number="3" data-line-start="3" data-line-end="3"><div class="line-content"><span class="mtk1"></span></div></div><div class="code-line" data-line-number="4" data-line-start="4" data-line-end="4"><div class="line-content"><span class="mtk5"><!-- New --></span></div></div><div class="code-line" data-line-number="5" data-line-start="5" data-line-end="5"><div class="line-content"><span class="mtk14"><</span><span class="mtk6">button</span><span class="mtk1"></span><span class="mtk10">onclick</span><span class="mtk1">=</span><span class="mtk12">"</span><span class="mtk16">openApproveModal</span><span class="mtk12">({{</span><span class="mtk10">property</span><span class="mtk12">.</span><span class="mtk10">id</span><span class="mtk12">}})"</span><span class="mtk1"></span><span class="mtk10">class</span><span class="mtk1">=</span><span class="mtk12">"text-green-600 hover:text-green-700 p-2"</span><span class="mtk1"></span><span class="mtk10">title</span><span class="mtk1">=</span><span class="mtk12">"Approve"</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="6" data-line-start="6" data-line-end="6"><div class="line-content"><span class="mtk1"></span><span class="mtk14"><</span><span class="mtk6">i</span><span class="mtk1"></span><span class="mtk10">class</span><span class="mtk1">=</span><span class="mtk12">"fas fa-check"</span><span class="mtk14">></</span><span class="mtk6">i</span><span class="mtk14">></span></div></div><div class="code-line" data-line-number="7" data-line-start="7" data-line-end="7"><div class="line-content"><span class="mtk14"></</span><span class="mtk6">button</span><span class="mtk14">></span></div></div></div></div></div></pre>
