{% extends 'admin/base.html' %}
{% block content %}

<!-- Dashboard Content -->
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <!-- Page Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-2">Dashboard</h1>
    <p class="text-gray-600">Welcome back! Here's what's happening with your properties.</p>
  </div>

  <!-- Stats Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <!-- Total Properties -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-gray-600 text-sm font-medium mb-1">Total Properties</p>
          <p class="text-3xl font-bold text-gray-900">{{count}}</p>
          <p class="text-green-600 text-sm mt-2">
            <i class="fas fa-arrow-up mr-1"></i>12% from last month
          </p>
        </div>
        <div class="bg-blue-100 w-14 h-14 rounded-full flex items-center justify-center">
          <i class="fas fa-building text-blue-600 text-2xl"></i>
        </div>
      </div>
    </div>

    <!-- Active Listings -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-gray-600 text-sm font-medium mb-1">Active Listings</p>
          <p class="text-3xl font-bold text-gray-900">{{count_active}}</p>
          <p class="text-green-600 text-sm mt-2">
            <i class="fas fa-arrow-up mr-1"></i>8% from last month
          </p>
        </div>
        <div class="bg-green-100 w-14 h-14 rounded-full flex items-center justify-center">
          <i class="fas fa-check-circle text-green-600 text-2xl"></i>
        </div>
      </div>
    </div>

    <!-- Total Views -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-gray-600 text-sm font-medium mb-1">Total Views</p>
          <p class="text-3xl font-bold text-gray-900">{{count_views}}</p>
          <p class="text-green-600 text-sm mt-2">
            <i class="fas fa-arrow-up mr-1"></i>24% from last month
          </p>
        </div>
        <div class="bg-purple-100 w-14 h-14 rounded-full flex items-center justify-center">
          <i class="fas fa-eye text-purple-600 text-2xl"></i>
        </div>
      </div>
    </div>

    <!-- Inquiries -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-gray-600 text-sm font-medium mb-1">New Inquiries</p>
          <p class="text-3xl font-bold text-gray-900">24</p>
          <p class="text-yellow-600 text-sm mt-2">
            <i class="fas fa-minus mr-1"></i>2% from last month
          </p>
        </div>
        <div class="bg-yellow-100 w-14 h-14 rounded-full flex items-center justify-center">
          <i class="fas fa-envelope text-yellow-600 text-2xl"></i>
        </div>
      </div>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Recent Properties -->
    <div class="lg:col-span-2">
      <div class="bg-white rounded-lg shadow-md p-6 mb-8">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-xl font-bold text-gray-900">Recent Properties</h2>
          <a href="properties.html" class="text-blue-600 hover:text-blue-700 font-semibold text-sm">View All →</a>
        </div>
        <div class="overflow-x-auto">
          <table class="w-full">
            <thead>
              <tr class="border-b">
                <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700">Property</th>
                <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700">Status</th>
                <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700">Price</th>
                <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700">Views</th>
                <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700">Actions</th>
              </tr>
            </thead>
            <tbody>

              {% for properties in properties %}
              <tr class="border-b hover:bg-gray-50">
                <td class="py-4 px-4">
                  <div class="flex items-center gap-3">
                    <img src="http://127.0.0.1:8000/media/property_images/main_image/studio_main2.png" alt="Property"
                      class="w-16 h-12 object-cover rounded">
                    <div>
                      <p class="font-semibold text-gray-900 text-sm">{{properties.title}}</p>
                      <p class="text-xs text-gray-600">{{properties.city}}, {{properties.state}}</p>
                    </div>
                  </div>
                </td>
                <td class="py-4 px-4">
                  <span
                    class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-medium">{{properties.status}}</span>
                </td>
                <td class="py-4 px-4 font-semibold text-gray-900">{{properties.price}}</td>
                <td class="py-4 px-4 text-gray-600">1,234</td>
                <td class="py-4 px-4">
                  <div class="flex gap-2">
                    <button
                      onclick="editProperty(1, 'Modern Family Villa', 'Villa', 'For Sale', '$1,250,000', 'Beverly Hills, CA', 4, 3, 3200)"
                      class="text-blue-600 hover:text-blue-700"><i class="fas fa-edit"></i></button>
                    <button class="text-red-600 hover:text-red-700"><i class="fas fa-trash"></i></button>
                  </div>
                </td>
              </tr>
              {% endfor %}


            </tbody>
          </table>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="bg-white rounded-lg shadow-md p-6">
        <h2 class="text-xl font-bold text-gray-900 mb-6">Quick Actions</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <a href="properties.html"
            class="flex flex-col items-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-600 hover:bg-blue-50 transition-colors">
            <i class="fas fa-plus-circle text-blue-600 text-3xl mb-2"></i>
            <span class="text-sm font-semibold text-gray-700">Add Property</span>
          </a>
          <button onclick="exportData()"
            class="flex flex-col items-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-600 hover:bg-green-50 transition-colors">
            <i class="fas fa-file-export text-green-600 text-3xl mb-2"></i>
            <span class="text-sm font-semibold text-gray-700">Export Data</span>
          </button>
          <button onclick="viewReports()"
            class="flex flex-col items-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-purple-600 hover:bg-purple-50 transition-colors">
            <i class="fas fa-chart-line text-purple-600 text-3xl mb-2"></i>
            <span class="text-sm font-semibold text-gray-700">View Reports</span>
          </button>
          <button onclick="openSettingsModal()"
            class="flex flex-col items-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-yellow-600 hover:bg-yellow-50 transition-colors">
            <i class="fas fa-cog text-yellow-600 text-3xl mb-2"></i>
            <span class="text-sm font-semibold text-gray-700">Settings</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Sidebar -->
    <div class="lg:col-span-1">
      <!-- Recent Inquiries -->
      <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <h2 class="text-xl font-bold text-gray-900 mb-4">Recent Inquiries</h2>
        <div class="space-y-4">
          <div class="pb-4 border-b">
            <div class="flex items-start gap-3 mb-2">
              <img src="http://127.0.0.1:8000/media/property_images/main_image/studio_main2.png" alt="User"
                class="w-10 h-10 rounded-full">
              <div class="flex-1">
                <p class="font-semibold text-gray-900 text-sm">John Smith</p>
                <p class="text-xs text-gray-600">Modern Family Villa</p>
                <p class="text-xs text-gray-500 mt-1">2 hours ago</p>
              </div>
            </div>
            <button
              onclick="viewInquiry('John Smith', 'john.smith@email.com', 'Modern Family Villa', 'I am interested in scheduling a viewing for this property. Is it still available?', '2 hours ago')"
              class="text-blue-600 hover:text-blue-700 text-sm font-medium">View Message →</button>
          </div>

          <div class="pb-4 border-b">
            <div class="flex items-start gap-3 mb-2">
              <img src="	http://127.0.0.1:8000/media/property_images/main_image/studio_main2.png" alt="User"
                class="w-10 h-10 rounded-full">
              <div class="flex-1">
                <p class="font-semibold text-gray-900 text-sm">Sarah Johnson</p>
                <p class="text-xs text-gray-600">Downtown Apartment</p>
                <p class="text-xs text-gray-500 mt-1">5 hours ago</p>
              </div>
            </div>
            <button
              onclick="viewInquiry('Sarah Johnson', 'sarah.j@email.com', 'Downtown Apartment', 'Could you provide more details about the monthly maintenance fees and utilities included?', '5 hours ago')"
              class="text-blue-600 hover:text-blue-700 text-sm font-medium">View Message →</button>
          </div>

          <div class="pb-4">
            <div class="flex items-start gap-3 mb-2">
              <img src="	http://127.0.0.1:8000/media/property_images/main_image/studio_main2.png" alt="User"
                class="w-10 h-10 rounded-full">
              <div class="flex-1">
                <p class="font-semibold text-gray-900 text-sm">Mike Wilson</p>
                <p class="text-xs text-gray-600">Lakefront Retreat</p>
                <p class="text-xs text-gray-500 mt-1">1 day ago</p>
              </div>
            </div>
            <button
              onclick="viewInquiry('Mike Wilson', 'mike.wilson@email.com', 'Lakefront Retreat', 'Is this property pet-friendly? I have two dogs and would like to know if they are welcome.', '1 day ago')"
              class="text-blue-600 hover:text-blue-700 text-sm font-medium">View Message →</button>
          </div>
        </div>
      </div>

      <!-- Activity Log -->
      <div class="bg-white rounded-lg shadow-md p-6">
        <h2 class="text-xl font-bold text-gray-900 mb-4">Recent Activity</h2>
        <div class="space-y-4">
          <div class="flex items-start gap-3">
            <div class="bg-green-100 w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0">
              <i class="fas fa-plus text-green-600 text-sm"></i>
            </div>
            <div>
              <p class="text-sm text-gray-900">New property added</p>
              <p class="text-xs text-gray-500">Modern Family Villa</p>
              <p class="text-xs text-gray-400 mt-1">Today, 9:30 AM</p>
            </div>
          </div>

          <div class="flex items-start gap-3">
            <div class="bg-blue-100 w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0">
              <i class="fas fa-edit text-blue-600 text-sm"></i>
            </div>
            <div>
              <p class="text-sm text-gray-900">Property updated</p>
              <p class="text-xs text-gray-500">Downtown Apartment</p>
              <p class="text-xs text-gray-400 mt-1">Yesterday, 3:45 PM</p>
            </div>
          </div>

          <div class="flex items-start gap-3">
            <div class="bg-purple-100 w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0">
              <i class="fas fa-eye text-purple-600 text-sm"></i>
            </div>
            <div>
              <p class="text-sm text-gray-900">Property viewed 50 times</p>
              <p class="text-xs text-gray-500">Lakefront Retreat</p>
              <p class="text-xs text-gray-400 mt-1">Yesterday, 11:20 AM</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Edit Property Modal -->
<div id="editModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
  <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
    <div class="sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center">
      <h2 class="text-2xl font-bold text-gray-900">Edit Property</h2>
      <button onclick="closeEditModal()" class="text-gray-600 hover:text-gray-900">
        <i class="fas fa-times text-xl"></i>
      </button>
    </div>

    <form class="p-6 space-y-4" onsubmit="saveProperty(event)">
      <input type="hidden" id="edit_propertyId">

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Property Title</label>
          <input type="text" id="edit_title"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Property Type</label>
          <select id="edit_type"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
            <option>House</option>
            <option>Apartment</option>
            <option>Villa</option>
            <option>Condo</option>
            <option>Penthouse</option>
          </select>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
          <select id="edit_status"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
            <option>For Sale</option>
            <option>For Rent</option>
            <option>Pending</option>
            <option>Sold</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Price</label>
          <input type="text" id="edit_price"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
        </div>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
        <input type="text" id="edit_location"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Bedrooms</label>
          <input type="number" id="edit_bedrooms"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Bathrooms</label>
          <input type="number" id="edit_bathrooms"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Square Feet</label>
          <input type="number" id="edit_sqft"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
        </div>
      </div>

      <div class="flex justify-end gap-3 pt-4 border-t">
        <button type="button" onclick="closeEditModal()"
          class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium">
          Cancel
        </button>
        <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold">
          Save Changes
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Inquiry Detail Modal -->
<div id="inquiryModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
  <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
    <div class="sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center">
      <h2 class="text-2xl font-bold text-gray-900">Inquiry Details</h2>
      <button onclick="closeInquiryModal()" class="text-gray-600 hover:text-gray-900">
        <i class="fas fa-times text-xl"></i>
      </button>
    </div>

    <div class="p-6 space-y-4">
      <div class="bg-gray-50 p-4 rounded-lg">
        <div class="flex items-center gap-3 mb-4">
          <img src="	http://127.0.0.1:8000/media/property_images/main_image/studio_main2.png" alt="User"
            class="w-12 h-12 rounded-full">
          <div>
            <p class="font-semibold text-gray-900" id="inquiry_name"></p>
            <p class="text-sm text-gray-600" id="inquiry_email"></p>
          </div>
        </div>
        <div class="space-y-2">
          <p class="text-sm"><span class="font-semibold">Property:</span> <span id="inquiry_property"></span></p>
          <p class="text-sm"><span class="font-semibold">Time:</span> <span id="inquiry_time"></span></p>
        </div>
      </div>

      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-2">Message</label>
        <p class="text-gray-700 bg-gray-50 p-4 rounded-lg" id="inquiry_message"></p>
      </div>

      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-2">Reply</label>
        <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" rows="4"
          placeholder="Type your reply here..."></textarea>
      </div>

      <div class="flex justify-end gap-3 pt-4 border-t">
        <button onclick="closeInquiryModal()"
          class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium">
          Close
        </button>
        <button onclick="sendReply()"
          class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold">
          <i class="fas fa-paper-plane mr-2"></i>Send Reply
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Settings Modal -->
<div id="settingsModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
  <div class="bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto">
    <div class="sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center">
      <h2 class="text-2xl font-bold text-gray-900">Settings</h2>
      <button onclick="closeSettingsModal()" class="text-gray-600 hover:text-gray-900">
        <i class="fas fa-times text-xl"></i>
      </button>
    </div>

    <div class="p-6">
      <!-- Profile Settings -->
      <div class="mb-8">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Profile Settings</h3>
        <div class="space-y-4">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
              <input type="text" value="Admin User"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
              <input type="email" value="admin@dreamhome.com"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
            <input type="tel" value="+1 (555) 123-4567"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
          </div>
        </div>
      </div>

      <!-- Security Settings -->
      <div class="mb-8">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Security Settings</h3>
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Current Password</label>
            <input type="password" placeholder="Enter current password"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">New Password</label>
              <input type="password" placeholder="Enter new password"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Confirm Password</label>
              <input type="password" placeholder="Confirm new password"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
            </div>
          </div>
        </div>
      </div>

      <!-- Notification Settings -->
      <div class="mb-8">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Notification Settings</h3>
        <div class="space-y-3">
          <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
            <div>
              <p class="font-medium text-gray-900">Email Notifications</p>
              <p class="text-sm text-gray-600">Receive email updates for new inquiries</p>
            </div>
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" checked class="sr-only peer">
              <div
                class="w-11 h-6 bg-gray-300 peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600">
              </div>
            </label>
          </div>
          <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
            <div>
              <p class="font-medium text-gray-900">Property Alerts</p>
              <p class="text-sm text-gray-600">Get notified when properties need attention</p>
            </div>
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" checked class="sr-only peer">
              <div
                class="w-11 h-6 bg-gray-300 peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600">
              </div>
            </label>
          </div>
          <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
            <div>
              <p class="font-medium text-gray-900">Weekly Reports</p>
              <p class="text-sm text-gray-600">Receive weekly performance reports</p>
            </div>
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" class="sr-only peer">
              <div
                class="w-11 h-6 bg-gray-300 peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600">
              </div>
            </label>
          </div>
        </div>
      </div>

      <!-- General Settings -->
      <div>
        <h3 class="text-lg font-semibold text-gray-900 mb-4">General Settings</h3>
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Currency</label>
            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
              <option>USD ($)</option>
              <option>EUR (€)</option>
              <option>GBP (£)</option>
              <option>JPY (¥)</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Time Zone</label>
            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
              <option>Pacific Time (PT)</option>
              <option>Mountain Time (MT)</option>
              <option>Central Time (CT)</option>
              <option>Eastern Time (ET)</option>
            </select>
          </div>
        </div>
      </div>

      <div class="flex justify-end gap-3 pt-6 border-t mt-6">
        <button onclick="closeSettingsModal()"
          class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium">
          Cancel
        </button>
        <button onclick="saveSettings()"
          class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold">
          Save Settings
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  // Check authentication


  function handleLogout() {
    if (confirm('Are you sure you want to logout?')) {
      localStorage.removeItem('adminLoggedIn');
      localStorage.removeItem('adminEmail');
      window.location.href = 'login.html';
    }
  }

  // Edit Property Modal Functions
  function editProperty(id, title, type, status, price, location, bedrooms, bathrooms, sqft) {
    document.getElementById('edit_propertyId').value = id;
    document.getElementById('edit_title').value = title;
    document.getElementById('edit_type').value = type;
    document.getElementById('edit_status').value = status;
    document.getElementById('edit_price').value = price;
    document.getElementById('edit_location').value = location;
    document.getElementById('edit_bedrooms').value = bedrooms;
    document.getElementById('edit_bathrooms').value = bathrooms;
    document.getElementById('edit_sqft').value = sqft;
    document.getElementById('editModal').classList.remove('hidden');
  }

  function closeEditModal() {
    document.getElementById('editModal').classList.add('hidden');
  }

  function saveProperty(event) {
    event.preventDefault();
    // Here you would typically send the data to a server
    const propertyId = document.getElementById('edit_propertyId').value;
    alert('Property #' + propertyId + ' has been updated successfully!');
    closeEditModal();
    // Optionally refresh the page or update the table
    location.reload();
  }

  // Inquiry Modal Functions
  function viewInquiry(name, email, property, message, time) {
    document.getElementById('inquiry_name').textContent = name;
    document.getElementById('inquiry_email').textContent = email;
    document.getElementById('inquiry_property').textContent = property;
    document.getElementById('inquiry_message').textContent = message;
    document.getElementById('inquiry_time').textContent = time;
    document.getElementById('inquiryModal').classList.remove('hidden');
  }

  function closeInquiryModal() {
    document.getElementById('inquiryModal').classList.add('hidden');
  }

  function sendReply() {
    alert('Reply sent successfully!');
    closeInquiryModal();
  }

  // Settings Modal Functions
  function openSettingsModal() {
    document.getElementById('settingsModal').classList.remove('hidden');
  }

  function closeSettingsModal() {
    document.getElementById('settingsModal').classList.add('hidden');
  }

  function saveSettings() {
    alert('Settings saved successfully!');
    closeSettingsModal();
  }

  // Quick Action Functions
  function exportData() {
    alert('Exporting data... This will download a CSV file with all property data.');
  }

  function viewReports() {
    alert('Opening reports dashboard...');
  }


</script>
{% endblock %}